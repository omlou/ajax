!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ajax=t()}(this,(function(){"use strict";function e(e,t=!1){let o=[];for(let t in e)null!==e[t]&&void 0!==e[t]||(e[t]=""),o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));let n=o.join("&");return n&&t?"?"+n:n}var t,o;!function(e){e.DF="",e.AB="arraybuffer",e.Blob="blob",e.DOC="document",e.JSON="json",e.TXT="text"}(t||(t={})),function(e){e.json="application/json;charset=UTF-8",e.urlencoded="application/x-www-form-urlencoded;charset=UTF-8",e.formData="multipart/form-data",e.text="text/plain;charset=UTF-8",e.xml="application/xml;charset=UTF-8",e.stream="application/octet-stream"}(o||(o={}));const n=new Set(["[object String]","[object FormData]","[object Blob]","[object ArrayBuffer]","[object URLSearchParams]","[object Null]","[object Undefined]"]);function r(t,o){if(!o)return"";let n="string"==typeof o?o:e(o);return n?-1!==t.indexOf("?")?"&"+n:"?"+n:""}function s(t,r,s){if(n.has(Object.prototype.toString.call(t)))return t;if(r){if(r.includes("application/json"))t=JSON.stringify(t);else if(r.includes("application/x-www-form-urlencoded"))t=e(t);else if(r.includes("multipart/form-data")){const e=new FormData;for(let o in t)e.append(o,t[o]);t=e}}else s.setRequestHeader("Content-Type",o.json),t=JSON.stringify(t);return t}function a(e){const t={};if(null!==e){const o=e.trim().split(/[\r\n]+/);for(const e of o){const o=e.split(": ");t[o[0]]=o[1]}}return t}const d=function(e){return new Promise((function(o,n){const d=new XMLHttpRequest;d.addEventListener("load",(t=>{console.log("load",t,d);const r=a(d.getAllResponseHeaders()),s={request:d,config:e,headers:r,response:d.response,status:d.status,statusText:d.statusText};var l;(l=d.status)>=200&&l<=299?o(s):n(s)})),d.addEventListener("error",(e=>{console.log("error",e,d),n(e)})),d.addEventListener("timeout",(e=>{console.log("timeout",e,d),n(e)})),e.uploadProgress&&(d.upload.addEventListener("loadstart",(t=>{e.uploadProgress(t)})),d.upload.addEventListener("progress",(t=>{e.uploadProgress(t)})),d.upload.addEventListener("load",(t=>{e.uploadProgress(t)})),d.upload.addEventListener("loadend",(t=>{e.uploadProgress(t)})),d.upload.addEventListener("error",(t=>{e.uploadProgress(t)}))),e.downloadProgress&&(d.addEventListener("loadstart",(t=>{e.downloadProgress(t)})),d.addEventListener("progress",(t=>{e.downloadProgress(t)})),d.addEventListener("loadend",(t=>{e.downloadProgress(t)})));let{method:l,url:i,params:u,data:c,headers:p,timeout:f,responseType:m,withCredentials:g}=e;l=l?l.toUpperCase():"GET";let T=!1;if(new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]).has(l)&&(T=!0),u&&(i+=r(i,u)),d.open(l,i,!0),void 0!==g&&(d.withCredentials=g),d.responseType=m||t.JSON,p){let e="";for(const t in p){let o=p[t];o=null==o?"":String(o),d.setRequestHeader(t,o);"content-type"===t.toLowerCase()&&(e=o)}c=T?null:s(c,e,d)}else c=T?null:s(c,"",d);d.timeout=f||0,d.send()}))};return Object.assign(d,{getUrlParam:r,getHeaders:a,ContentType:o}),d}));
//# sourceMappingURL=ajax.min.js.map
