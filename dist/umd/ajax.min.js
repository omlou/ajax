!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ajax=t()}(this,(function(){"use strict";function e(e,t=!1){let o=[];for(let t in e)null!==e[t]&&void 0!==e[t]||(e[t]=""),o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));let n=o.join("&");return n&&t?"?"+n:n}var t,o;!function(e){e.DF="",e.AB="arraybuffer",e.Blob="blob",e.DOC="document",e.JSON="json",e.TXT="text"}(t||(t={})),function(e){e.json="application/json;charset=UTF-8",e.urlencoded="application/x-www-form-urlencoded;charset=UTF-8",e.formData="multipart/form-data",e.text="text/plain;charset=UTF-8",e.xml="application/xml;charset=UTF-8",e.stream="application/octet-stream"}(o||(o={}));const n=new Set(["[object String]","[object FormData]","[object Blob]","[object ArrayBuffer]","[object URLSearchParams]","[object Null]","[object Undefined]"]),r=new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]);function s(t,o){if(!o)return"";let n="string"==typeof o?o:e(o);return n?-1!==t.indexOf("?")?"&"+n:"?"+n:""}function a(t,s,a,d){return r.has(d)?null:(n.has(Object.prototype.toString.call(t))||(s?s.includes("application/json")?t=JSON.stringify(t):s.includes("application/x-www-form-urlencoded")&&(t=e(t)):(a.setRequestHeader("Content-Type",o.json),t=JSON.stringify(t))),t)}function d(e){const t={};if(null!==e){const o=e.trim().split(/[\r\n]+/);for(const e of o){const o=e.split(": ");t[o[0]]=o[1]}}return t}const l=function(e){return new Promise((function(o,n){const r=new XMLHttpRequest;r.addEventListener("load",(t=>{console.log("load",t,r);const s=d(r.getAllResponseHeaders()),a={request:r,config:e,headers:s,response:r.response,status:r.status,statusText:r.statusText};var l;(l=r.status)>=200&&l<=299?o(a):n(a)})),r.addEventListener("error",(e=>{console.log("error",e,r),n(e)})),r.addEventListener("timeout",(e=>{console.log("timeout",e,r),n(e)})),e.uploadProgress&&(r.upload.addEventListener("loadstart",(t=>{e.uploadProgress(t)})),r.upload.addEventListener("progress",(t=>{e.uploadProgress(t)})),r.upload.addEventListener("load",(t=>{e.uploadProgress(t)})),r.upload.addEventListener("loadend",(t=>{e.uploadProgress(t)})),r.upload.addEventListener("error",(t=>{e.uploadProgress(t)}))),e.downloadProgress&&(r.addEventListener("loadstart",(t=>{e.downloadProgress(t)})),r.addEventListener("progress",(t=>{e.downloadProgress(t)})),r.addEventListener("loadend",(t=>{e.downloadProgress(t)})));let{method:l,url:i,params:u,data:c,headers:p,timeout:f,responseType:g,withCredentials:m}=e;if(l=l?l.toUpperCase():"GET",u&&(i+=s(i,u)),r.open(l,i,!0),void 0!==m&&(r.withCredentials=m),r.responseType=g||t.JSON,p){let e="";for(const t in p){let o=p[t];o=null==o?"":String(o),r.setRequestHeader(t,o);"content-type"===t.toLowerCase()&&(e=o)}c=a(c,e,r,l)}else c=a(c,"",r,l);r.timeout=f||0,r.send(c)}))};return Object.assign(l,{getUrlParam:s,getHeaders:d,ContentType:o}),l}));
//# sourceMappingURL=ajax.min.js.map
