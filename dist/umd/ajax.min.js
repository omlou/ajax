!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ajax=t()}(this,(function(){"use strict";function e(e,t=!1){let o=[];for(let t in e)null!==e[t]&&void 0!==e[t]||(e[t]=""),o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));let n=o.join("&");return n&&t?"?"+n:n}var t,o;!function(e){e.DF="",e.AB="arraybuffer",e.Blob="blob",e.DOC="document",e.JSON="json",e.TXT="text"}(t||(t={})),function(e){e.json="application/json;charset=UTF-8",e.urlencoded="application/x-www-form-urlencoded;charset=UTF-8",e.formData="multipart/form-data",e.text="text/plain;charset=UTF-8",e.xml="application/xml;charset=UTF-8",e.stream="application/octet-stream"}(o||(o={}));const n=new Set(["[object String]","[object FormData]","[object Blob]","[object ArrayBuffer]","[object URLSearchParams]","[object Null]","[object Undefined]"]);function r(t,o){if(!o)return"";let n="string"==typeof o?o:e(o);return n?-1!==t.indexOf("?")?"&"+n:"?"+n:""}function s(t,r,s){if(n.has(Object.prototype.toString.call(t)))return t;if(r){if(r.includes("application/json"))t=JSON.stringify(t);else if(r.includes("application/x-www-form-urlencoded"))t=e(t);else if(r.includes("multipart/form-data")){const e=new FormData;for(let o in t)e.append(o,t[o]);t=e}}else s.setRequestHeader("Content-Type",o.json),t=JSON.stringify(t);return t}function a(e){const t={};if(null!==e){const o=e.trim().split(/[\r\n]+/);for(const e of o){const o=e.split(": ");t[o[0]]=o[1]}}return t}const l=function(e){return new Promise((function(o,n){const l=new XMLHttpRequest;l.addEventListener("load",(t=>{console.log("load",t,l);const r=a(l.getAllResponseHeaders()),s={request:l,config:e,headers:r,response:l.response,status:l.status,statusText:l.statusText};var d;(d=l.status)>=200&&d<=299?o(s):n(s)})),l.addEventListener("error",(e=>{console.log("error",e,l),n(e)})),l.addEventListener("timeout",(e=>{console.log("timeout",e,l),n(e)})),e.uploadProgress&&(l.upload.addEventListener("loadstart",(t=>{e.uploadProgress(t)})),l.upload.addEventListener("progress",(t=>{e.uploadProgress(t)})),l.upload.addEventListener("load",(t=>{e.uploadProgress(t)})),l.upload.addEventListener("loadend",(t=>{e.uploadProgress(t)})),l.upload.addEventListener("error",(t=>{e.uploadProgress(t)}))),e.downloadProgress&&(l.addEventListener("loadstart",(t=>{e.downloadProgress(t)})),l.addEventListener("progress",(t=>{e.downloadProgress(t)})),l.addEventListener("loadend",(t=>{e.downloadProgress(t)})));let{method:d,url:i,params:u,data:c,headers:p,timeout:f,responseType:g,withCredentials:m}=e;d=d?d.toUpperCase():"GET";let T=!1;if(new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]).has(d)&&(T=!0),u&&(i+=r(i,u)),l.open(d,i,!0),console.log(l),void 0!==m&&(l.withCredentials=m),l.responseType=g||t.JSON,p){let e="";for(const t in p){let o=p[t];o=null==o?"":String(o),l.setRequestHeader(t,o);"content-type"===t.toLowerCase()&&(e=o)}c=T?null:s(c,e,l)}else c=T?null:s(c,"",l);l.timeout=f||0}))};return Object.assign(l,{getUrlParam:r,getHeaders:a,ContentType:o}),l}));
//# sourceMappingURL=ajax.min.js.map
